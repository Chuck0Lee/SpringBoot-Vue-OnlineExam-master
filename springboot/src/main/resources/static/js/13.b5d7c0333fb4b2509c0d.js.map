{"version":3,"sources":["webpack:///src/components/student/message.vue","webpack:///./src/components/student/message.vue?96dd","webpack:///./src/components/student/message.vue"],"names":["message","data","flag","current","title","content","pagination","total","size","msg","created","this","getMsg","methods","_this","$axios","then","res","code","records","handleSizeChange","val","handleCurrentChange","submit","_this2","date","Date","length","$message","type","url","method","time","replay","messageId","_this3","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","_ref","value","console","log","replayTime","catch","enter","index","leave","student_message","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","_v","placeholder","clearable","model","callback","$$v","expression","rows","on","click","$event","_l","key","mouseenter","mouseleave","_s","replayData","index2","_e","current-page","page-sizes","page-size","layout","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.b5d7c0333fb4b2509c0d.js","sourcesContent":["// 给我留言页面\n<template>\n  <div id=\"message\">\n    <div class=\"title\">给我留言</div>\n    <div class=\"wrapper\">\n      <div class=\"title1\">\n        <el-input\n          placeholder=\"留言标题\"\n          v-model=\"title\"\n          clearable>\n        </el-input>\n      </div>\n      <div class=\"content\">\n        <el-input\n          type=\"textarea\"\n          :rows=\"3\"\n          placeholder=\"留言内容\"\n          v-model=\"content\"\n          clearable>\n        </el-input>\n      </div>\n      <div class=\"btn\">\n        <el-button type=\"primary\" @click=\"submit()\">提交留言</el-button>\n      </div>\n      <div class=\"all\">\n        <ul class=\"msglist\">\n          <li class=\"list\" \n          @mouseenter=\"enter(index)\" \n          @mouseleave=\"leave(index)\"\n          v-for=\"(data,index) in msg\" :key=\"index\"\n          >\n            <p class=\"title\"> <i class=\"iconfont icon-untitled33\"></i>{{data.title}}</p>\n            <p class=\"content\">{{data.content}}</p>\n            <p class=\"date\"><i class=\"iconfont icon-date\"></i>{{data.time}}</p>\n            <div v-for=\"(replayData,index2) in data.replays\" :key=\"index2\">\n              <p class=\"comment\"><i class=\"iconfont icon-huifuxiaoxi\"></i>{{replayData.replay}}</p>\n            </div>\n            <span class=\"replay\" @click=\"replay(data.id)\" v-if=\"flag && index == current\">Comment</span>\n          </li>\n        </ul>\n      </div>\n      <div class=\"pagination\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pagination.current\"\n          :page-sizes=\"[4,6,8,10]\"\n          :page-size=\"pagination.size\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"pagination.total\">\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // name: 'message'\n  data() {\n    return {\n      flag: false,\n      current: 0,\n      title: \"\",\n      content: \"\",\n      pagination: { //分页后的留言列表\n        current: 1, //当前页\n        total: null, //记录条数\n        size: 4 //每页条数\n      },\n      msg: []\n    }\n  },\n  created() {\n    this.getMsg()\n  },\n  // watch: {\n    \n  // },\n  methods: {\n    getMsg() {\n      this.$axios(`/api/messages/${this.pagination.current}/${this.pagination.size}`).then(res => {\n        let status = res.data.code\n        if(status == 200) {\n          this.msg = res.data.data.records\n          this.pagination = res.data.data\n        }\n      })\n    },\n    //改变当前记录条数\n    handleSizeChange(val) {\n      this.pagination.size = val\n      this.getMsg()\n    },\n    //改变当前页码，重新发送请求\n    handleCurrentChange(val) {\n      this.pagination.current = val\n      this.getMsg()\n    },\n    // formatTime(date) { //日期格式化\n    //   let year = date.getFullYear()\n    //   let month= date.getMonth()+ 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\n    //   let day=date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\n    //   let hours=date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\n    //   let minutes=date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\n    //   let seconds=date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\n    //   // 拼接\n    //   return year+\"-\"+month+\"-\"+day+\" \"+hours+\":\"+minutes+\":\"+seconds;\n    // },\n    submit() {\n      let date = new Date()\n      if(this.title.length == 0 || this.content.length == 0) { //非空判断\n        this.$message({\n          type: 'error',\n          message: '留言标题或内容不能为空',\n        })\n       } else {\n      this.$axios({\n        url: \"/api/message\",\n        method: \"post\",\n        data: {\n          title: this.title,\n          content: this.content,\n          time: date\n        }\n      }).then(res => {\n        let code = res.data.code\n        if(code == 200) {\n          this.$message({\n            type: \"success\",\n            message: \"留言成功\"\n          })\n        }\n        this.getMsg()\n      })\n    }\n      this.title = \"\"\n      this.content = \"\"\n      this.getMsg()\n    },\n    replay(messageId) { //回复留言功能\n      this.$prompt('回复留言', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPattern: /^[\\s\\S]*.*[^\\s][\\s\\S]*$/,\n        inputErrorMessage: '回复不能为空'\n      }).then(({ value }) => {\n        let date = new Date()\n        console.log(messageId)\n        this.$axios({\n          url: '/api/replay',\n          method: 'post',\n          data: {\n            replay: value,\n            replayTime: date,\n            messageId: messageId\n          }\n        }).then(res => {\n          this.getMsg()\n        })\n        this.$message({\n          type: 'success',\n          message: '回复成功'\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消输入'\n        });       \n      });\n    },\n    enter(index) {\n      this.flag = true\n      this.current = index\n    },\n    leave(index) {\n      this.flag = false;\n      this.current = index;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.pagination {\n  display: flex;\n  justify-content: center;\n}\n#message {\n  width: 980px;\n  margin: 0 auto;\n}\n.title {\n  margin: 20px;\n}\n.content {\n  padding: 20px 0px;\n}\n#message  {\n  .btn {\n   padding-bottom: 20px;\n  }\n  .all {\n    .date {\n      color: rgb(80, 157, 202);\n      line-height: 45px;\n      font-size: 13px;\n    }\n    .list {\n      background-color: #eee;\n      padding:10px;\n      border-radius: 4px;\n      margin: 10px 0px;\n      position: relative;\n      transition: all .3s ease;\n      .title {\n        color: #5f5f5f;\n        margin: 0px;\n        font-size: 13px;\n        line-height: 30px;\n      }\n      .content {\n        padding: 0px;\n      }\n      .icon-untitled33 {\n        font-size: 13px;\n        margin-right: 4px;\n      }\n      .icon-date {\n        font-size: 13px;\n        margin-right: 4px;\n        color: rgb(80, 157, 202);\n      }\n      .replay {\n        position: absolute;\n        right: 30px;\n        bottom: 15px;\n        color: tomato;\n        cursor: pointer;\n        transition: all .3s ease;\n      }\n      .comment {\n        margin:-7px 0px; \n        padding-bottom: 12px;\n        font-size: 13px;\n        color: #28b2b4;\n        i {\n          margin-right: 4px;\n        }\n      }\n    }\n  }\n}\n#message .wrapper {\n  background-color: #fff;\n  padding: 20px;\n\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/student/message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"message\"}},[_c('div',{staticClass:\"title\"},[_vm._v(\"给我留言\")]),_vm._v(\" \"),_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"title1\"},[_c('el-input',{attrs:{\"placeholder\":\"留言标题\",\"clearable\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"留言内容\",\"clearable\":\"\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submit()}}},[_vm._v(\"提交留言\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"all\"},[_c('ul',{staticClass:\"msglist\"},_vm._l((_vm.msg),function(data,index){return _c('li',{key:index,staticClass:\"list\",on:{\"mouseenter\":function($event){_vm.enter(index)},\"mouseleave\":function($event){_vm.leave(index)}}},[_c('p',{staticClass:\"title\"},[_c('i',{staticClass:\"iconfont icon-untitled33\"}),_vm._v(_vm._s(data.title))]),_vm._v(\" \"),_c('p',{staticClass:\"content\"},[_vm._v(_vm._s(data.content))]),_vm._v(\" \"),_c('p',{staticClass:\"date\"},[_c('i',{staticClass:\"iconfont icon-date\"}),_vm._v(_vm._s(data.time))]),_vm._v(\" \"),_vm._l((data.replays),function(replayData,index2){return _c('div',{key:index2},[_c('p',{staticClass:\"comment\"},[_c('i',{staticClass:\"iconfont icon-huifuxiaoxi\"}),_vm._v(_vm._s(replayData.replay))])])}),_vm._v(\" \"),(_vm.flag && index == _vm.current)?_c('span',{staticClass:\"replay\",on:{\"click\":function($event){_vm.replay(data.id)}}},[_vm._v(\"Comment\")]):_vm._e()],2)}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.current,\"page-sizes\":[4,6,8,10],\"page-size\":_vm.pagination.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c51d994\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/student/message.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c51d994\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c51d994\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c51d994\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/student/message.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}